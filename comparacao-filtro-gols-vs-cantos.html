<?php
/**
 * Demonstra√ß√£o Visual: Como o Filtro de CANTOS foi Corrigido
 * Comparando com o Filtro de GOLS que j√° funcionava
 * 
 * Arquivo: comparacao-filtro-gols-vs-cantos.php
 */
?>
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compara√ß√£o: Filtro GOLS vs CANTOS</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 30px 20px;
        min-height: 100vh;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      h1 {
        color: white;
        text-align: center;
        margin-bottom: 40px;
        font-size: 32px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 40px;
      }
      .filter-box {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }
      .filter-box.gols {
        border-top: 5px solid #4caf50;
      }
      .filter-box.cantos {
        border-top: 5px solid #ff9800;
      }
      .filter-box h2 {
        margin-bottom: 20px;
        font-size: 24px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .filter-box.gols h2 {
        color: #4caf50;
      }
      .filter-box.cantos h2 {
        color: #ff9800;
      }

      .code-section {
        background: #f5f5f5;
        border-left: 4px solid;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 12px;
        overflow-x: auto;
      }
      .filter-box.gols .code-section {
        border-left-color: #4caf50;
      }
      .filter-box.cantos .code-section {
        border-left-color: #ff9800;
      }

      .error {
        color: #f44336;
        font-weight: bold;
      }
      .success {
        color: #4caf50;
        font-weight: bold;
      }
      .comment {
        color: #888;
      }
      .keyword {
        color: #0066cc;
        font-weight: bold;
      }
      .string {
        color: #dd4a00;
      }

      .explanation {
        background: #fff3e0;
        border-left: 4px solid #ff9800;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
      }
      .explanation.success {
        background: #e8f5e9;
        border-left-color: #4caf50;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .comparison-table th {
        background: #f5f5f5;
        padding: 15px;
        text-align: left;
        font-weight: bold;
        border-bottom: 2px solid #ddd;
      }
      .comparison-table td {
        padding: 12px 15px;
        border-bottom: 1px solid #eee;
      }
      .comparison-table tr:hover {
        background: #fafafa;
      }
      .pattern {
        font-family: "Courier New", monospace;
        background: #f0f0f0;
        padding: 4px 8px;
        border-radius: 3px;
        font-size: 12px;
      }
      .fix-indicator {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 3px;
        font-size: 12px;
        font-weight: bold;
      }
      .fix-indicator.added {
        background: #c8e6c9;
        color: #2e7d32;
      }
      .fix-indicator.changed {
        background: #fff9c4;
        color: #f57f17;
      }
      .fix-indicator.removed {
        background: #ffccbc;
        color: #d84315;
      }

      @media (max-width: 768px) {
        .comparison-grid {
          grid-template-columns: 1fr;
        }
        h1 {
          font-size: 24px;
        }
      }

      .test-link {
        display: inline-block;
        margin-top: 20px;
        padding: 12px 24px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-weight: bold;
        transition: transform 0.2s;
      }
      .test-link:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîç Compara√ß√£o: Filtro de GOLS vs CANTOS</h1>

      <div class="comparison-grid">
        <!-- GOLS (FUNCIONAVA) -->
        <div class="filter-box gols">
          <h2>‚úÖ GOLS (Funcionava)</h2>

          <h3>SQL Filter</h3>
          <div class="code-section">
            $filtro_tipo =
            <span class="string"
              >"AND ( LOWER(tipo_aposta) LIKE LOWER('%gol%') OR LOWER(titulo)
              LIKE LOWER('%gol%') OR LOWER(titulo) LIKE LOWER('%gols%') OR
              titulo LIKE '%‚öΩ%' )"</span
            >;
          </div>

          <div class="explanation success">
            <strong>‚úÖ Por que funciona:</strong>
            <ul style="margin: 10px 0 0 20px">
              <li>Usa <code>LOWER()</code> em AMBOS os lados</li>
              <li>Compara min√∫sculas com min√∫sculas</li>
              <li>Encontra padr√µes corretamente</li>
            </ul>
          </div>

          <h3>Padr√µes Detectados</h3>
          <table class="comparison-table">
            <tr>
              <th>Campo</th>
              <th>Padr√£o</th>
            </tr>
            <tr>
              <td>tipo_aposta</td>
              <td><span class="pattern">%gol%</span></td>
            </tr>
            <tr>
              <td>titulo</td>
              <td><span class="pattern">%gol%</span></td>
            </tr>
            <tr>
              <td>titulo</td>
              <td><span class="pattern">%gols%</span></td>
            </tr>
            <tr>
              <td>titulo</td>
              <td><span class="pattern">‚öΩ</span></td>
            </tr>
          </table>
        </div>

        <!-- CANTOS (N√ÉO FUNCIONAVA) -->
        <div class="filter-box cantos">
          <h2>‚ùå CANTOS (N√£o Funcionava)</h2>

          <h3>SQL Filter ‚ùå ERRADO</h3>
          <div class="code-section">
            $filtro_tipo =
            <span class="string"
              >"AND ( LOWER(tipo_aposta) LIKE
              <span class="error">'%CANTOS%'</span> OR titulo LIKE
              <span class="error">'%CANTOS%'</span> OR titulo LIKE
              <span class="error">'%Cantos%'</span> OR titulo LIKE
              <span class="error">'%cantos%'</span> OR titulo LIKE
              <span class="error">'%CANTO%'</span> ... )"</span
            >;
          </div>

          <div class="explanation">
            <strong>‚ùå Por que N√ÉO funciona:</strong>
            <ul style="margin: 10px 0 0 20px">
              <li><code>LOWER(tipo_aposta)</code> retorna min√∫sculas</li>
              <li>Mas compara com <code>'%CANTOS%'</code> em MAI√öSCULAS</li>
              <li>Resultado: <strong>0 registros encontrados!</strong></li>
            </ul>
          </div>

          <h3>SQL Filter ‚úÖ CORRETO</h3>
          <div class="code-section">
            $filtro_tipo =
            <span class="string"
              >"AND (
              <span class="success"
                >LOWER(tipo_aposta) LIKE LOWER('%cantos%')</span
              >
              OR
              <span class="success"
                >LOWER(tipo_aposta) LIKE LOWER('%canto%')</span
              >
              OR
              <span class="success">LOWER(titulo) LIKE LOWER('%cantos%')</span>
              OR
              <span class="success">LOWER(titulo) LIKE LOWER('%canto%')</span>
              OR
              <span class="success"
                >LOWER(titulo) LIKE LOWER('%escanteios%')</span
              >
              OR
              <span class="success"
                >LOWER(titulo) LIKE LOWER('%escantei%')</span
              >
              OR titulo LIKE '%‚õ≥%' OR titulo LIKE '%üö©%' )"</span
            >;
          </div>

          <div class="explanation success">
            <strong>‚úÖ Agora funciona:</strong>
            <ul style="margin: 10px 0 0 20px">
              <li>Usa <code>LOWER()</code> em AMBOS os lados</li>
              <li>Compara min√∫sculas com min√∫sculas</li>
              <li>Adicionado emoji üö© como alternativa</li>
              <li>Adicionado singular e plural</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- TABELA DE MUDAN√áAS -->
      <div
        style="
          background: white;
          border-radius: 12px;
          padding: 30px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        "
      >
        <h2 style="margin-bottom: 20px">üìã Resumo das Mudan√ßas</h2>

        <table class="comparison-table">
          <thead>
            <tr>
              <th width="25%">Padr√£o</th>
              <th width="25%">Antes ‚ùå</th>
              <th width="25%">Depois ‚úÖ</th>
              <th width="25%">Tipo de Mudan√ßa</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Compara√ß√£o tipo_aposta</td>
              <td>
                <span class="error">LOWER(tipo_aposta) LIKE '%CANTOS%'</span>
              </td>
              <td>
                <span class="success"
                  >LOWER(tipo_aposta) LIKE LOWER('%cantos%')</span
                >
              </td>
              <td><span class="fix-indicator changed">MUDADO</span></td>
            </tr>
            <tr>
              <td>Padr√£o Singular</td>
              <td><span class="error">N√£o existia</span></td>
              <td><span class="success">LOWER('%canto%')</span></td>
              <td><span class="fix-indicator added">ADICIONADO</span></td>
            </tr>
            <tr>
              <td>Compara√ß√£o T√≠tulo</td>
              <td><span class="error">titulo LIKE '%CANTOS%'</span></td>
              <td>
                <span class="success"
                  >LOWER(titulo) LIKE LOWER('%cantos%')</span
                >
              </td>
              <td><span class="fix-indicator changed">MUDADO</span></td>
            </tr>
            <tr>
              <td>Emoji Adicional</td>
              <td><span class="error">N√£o existia</span></td>
              <td><span class="success">titulo LIKE '%üö©%'</span></td>
              <td><span class="fix-indicator added">ADICIONADO</span></td>
            </tr>
            <tr>
              <td>Debug Info</td>
              <td><span class="error">N√£o existia</span></td>
              <td><span class="success">'filtro_debug' na resposta</span></td>
              <td><span class="fix-indicator added">ADICIONADO</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- INSTRU√á√ïES DE TESTE -->
      <div
        style="
          background: white;
          border-radius: 12px;
          padding: 30px;
          margin-top: 20px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        "
      >
        <h2 style="margin-bottom: 20px">üß™ Como Testar a Corre√ß√£o</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
          <div>
            <h3>1Ô∏è‚É£ Teste Visual</h3>
            <p>Abra <code>bot_aovivo.php</code> e:</p>
            <ol style="margin: 10px 0 0 20px">
              <li>Procure um card com cantos (‚õ≥ ou üö©)</li>
              <li>Clique no card</li>
              <li>Modal deve abrir com resultados</li>
            </ol>
          </div>
          <div>
            <h3>2Ô∏è‚É£ Teste Console</h3>
            <p>Abra o Developer Console (F12):</p>
            <p>
              <code style="background: #f0f0f0; padding: 5px"
                >‚úÖ Tipo detectado do banco: "CANTOS"</code
              >
            </p>
          </div>
        </div>

        <div style="margin-top: 20px">
          <h3>3Ô∏è‚É£ Teste de Debug Completo</h3>
          <a href="teste-filtro-cantos-completo.php" class="test-link">
            üß™ Abrir Teste Completo
          </a>
        </div>
      </div>
    </div>
  </body>
</html>
