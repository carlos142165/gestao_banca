<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Teste de Lucro</title>
  </head>
  <body>
    <h2>Valor do Lucro:</h2>
    <span id="valorLucroLabel" style="font-weight: bold; color: #27ae60"
      >R$ 0,00</span
    >

    <script>
      fetch("ajax_deposito.php")
        .then((response) => response.json())
        .then((data) => {
          console.log("Resposta completa:", data); // 🔍 Verifique no console

          const lucroSpan = document.getElementById("valorLucroLabel");
          let lucro = data.lucro;

          if (typeof lucro === "string") {
            lucro = parseFloat(lucro.replace(",", "."));
          }

          if (!isNaN(lucro)) {
            const lucroFormatado = lucro.toLocaleString("pt-BR", {
              style: "currency",
              currency: "BRL",
            });
            lucroSpan.textContent = lucroFormatado;
            lucroSpan.style.color = lucro >= 0 ? "#27ae60" : "#c0392b";
          } else {
            lucroSpan.textContent = "R$ 0,00";
            lucroSpan.style.color = "#7f8c8d";
          }
        })
        .catch((error) => {
          console.error("Erro ao buscar lucro:", error);
        });
    </script>
  </body>
</html>
