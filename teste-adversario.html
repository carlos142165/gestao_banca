<!-- 
üß™ TESTE: Verificar se advers√°rio est√° sendo mostrado corretamente
Use este arquivo para testar se a fun√ß√£o getAdversario est√° funcionando
-->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Exibi√ß√£o de Advers√°rio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-case {
            border: 2px solid #ddd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
            background: #f9f9f9;
        }
        .test-case.success {
            border-color: #4caf50;
            background: #e8f5e9;
        }
        .test-case.error {
            border-color: #f44336;
            background: #ffebee;
        }
        .test-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .test-input {
            font-family: monospace;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .test-output {
            font-family: monospace;
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
            font-size: 12px;
            white-space: pre-wrap;
        }
        .expected {
            color: #4caf50;
            font-weight: bold;
        }
        .actual {
            color: #2196f3;
            font-weight: bold;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #2196f3;
            padding-bottom: 10px;
        }
        .console-log {
            background: #1e1e1e;
            color: #0f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 15px 0;
            line-height: 1.4;
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 5px 0 0;
        }
        button:hover {
            background: #1976d2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Teste: Fun√ß√£o getAdversario()</h1>
        
        <p>Este teste verifica se a fun√ß√£o <code>getAdversario()</code> est√° retornando corretamente o advers√°rio do time filtrado.</p>
        
        <button onclick="executarTestes()">‚ñ∂Ô∏è Executar Testes</button>
        <button onclick="limparConsole()">üóëÔ∏è Limpar Console</button>
        
        <div class="console-log" id="console-log">
            <span style="color: #999;">Console ficar√° aqui...</span>
        </div>
        
        <div id="resultados"></div>
    </div>

    <script>
        // Copiar a fun√ß√£o getAdversario para teste
        function getAdversario(jogo, timePrincipal) {
          // ‚úÖ CORRIGIDO: Retorna o advers√°rio do time principal (n√£o o time principal)
          // Limpar emojis e espa√ßos dos times para compara√ß√£o segura
          const limparTime = (t) => {
            return t
              .replace(/‚öΩ/g, '')
              .replace(/üö©/g, '')
              .replace(/[\u00A0]/g, ' ')
              .trim()
              .toLowerCase();
          };

          const time1_limpo = limparTime(jogo.time_1);
          const time2_limpo = limparTime(jogo.time_2);
          const timePrincipal_limpo = limparTime(timePrincipal);

          console.log(
            `üîç getAdversario: principal="${timePrincipal}" (limpo="${timePrincipal_limpo}"), time1="${jogo.time_1}" (limpo="${time1_limpo}"), time2="${jogo.time_2}" (limpo="${time2_limpo}")`
          );

          // Se timePrincipal √© time_1, retorna time_2 (advers√°rio)
          if (time1_limpo === timePrincipal_limpo) {
            console.log(`  ‚úÖ ${timePrincipal} === time_1, retornando time_2: ${jogo.time_2}`);
            return jogo.time_2;
          }
          // Se timePrincipal √© time_2, retorna time_1 (advers√°rio)
          else if (time2_limpo === timePrincipal_limpo) {
            console.log(`  ‚úÖ ${timePrincipal} === time_2, retornando time_1: ${jogo.time_1}`);
            return jogo.time_1;
          }
          // Se n√£o encontrar correspond√™ncia exata, tentar com CONTAINS (em caso de nomes parciais)
          else {
            console.log(`  ‚ö†Ô∏è Correspond√™ncia exata n√£o encontrada, tentando CONTAINS...`);
            
            // Se timePrincipal est√° contido em time1, retorna time2
            if (time1_limpo.includes(timePrincipal_limpo) || timePrincipal_limpo.includes(time1_limpo)) {
              console.log(`  ‚úÖ ${timePrincipal} cont√©m/est√° em time_1, retornando time_2: ${jogo.time_2}`);
              return jogo.time_2;
            }
            // Se timePrincipal est√° contido em time2, retorna time1
            else if (time2_limpo.includes(timePrincipal_limpo) || timePrincipal_limpo.includes(time2_limpo)) {
              console.log(`  ‚úÖ ${timePrincipal} cont√©m/est√° em time_2, retornando time_1: ${jogo.time_1}`);
              return jogo.time_1;
            }
            // Fallback: retorna time_2 (compatibilidade)
            else {
              console.warn(
                `  ‚ùå Nenhuma correspond√™ncia encontrada para "${timePrincipal}" entre "${jogo.time_1}" e "${jogo.time_2}"`
              );
              return jogo.time_2;
            }
          }
        }

        // Interceptar console.log para exibir no div
        const consoleLogs = [];
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;

        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleLogs.push(args.join(' '));
            atualizarConsole();
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            consoleLogs.push('‚ö†Ô∏è ' + args.join(' '));
            atualizarConsole();
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            consoleLogs.push('‚ùå ' + args.join(' '));
            atualizarConsole();
        };

        function atualizarConsole() {
            const consoleDiv = document.getElementById('console-log');
            consoleDiv.innerHTML = consoleLogs.map(log => 
                '<div>' + log.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</div>'
            ).join('');
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }

        function limparConsole() {
            consoleLogs.length = 0;
            atualizarConsole();
        }

        function executarTestes() {
            limparConsole();
            console.log('========== INICIANDO TESTES ==========');
            
            const testes = [
                {
                    nome: 'Teste 1: Time Principal √© time_1',
                    jogo: { time_1: 'Udinese', time_2: 'Degerfors' },
                    timePrincipal: 'Udinese',
                    esperado: 'Degerfors'
                },
                {
                    nome: 'Teste 2: Time Principal √© time_2',
                    jogo: { time_1: 'Udinese', time_2: 'Degerfors' },
                    timePrincipal: 'Degerfors',
                    esperado: 'Udinese'
                },
                {
                    nome: 'Teste 3: Com emojis',
                    jogo: { time_1: '‚öΩ Udinese', time_2: '‚öΩ Degerfors' },
                    timePrincipal: 'Udinese',
                    esperado: '‚öΩ Degerfors'
                },
                {
                    nome: 'Teste 4: Com espa√ßos n√£o-quebr√°vel',
                    jogo: { time_1: 'Udinese\u00A0', time_2: 'Degerfors' },
                    timePrincipal: 'Udinese',
                    esperado: 'Degerfors'
                },
                {
                    nome: 'Teste 5: Everton vs Fulham',
                    jogo: { time_1: 'Everton', time_2: 'Fulham' },
                    timePrincipal: 'Everton',
                    esperado: 'Fulham'
                },
                {
                    nome: 'Teste 6: Com EC Santos',
                    jogo: { time_1: 'EC Santos', time_2: 'Corinthians' },
                    timePrincipal: 'Santos',
                    esperado: 'Corinthians'
                }
            ];

            let sucessos = 0;
            let falhas = 0;
            const resultadosDiv = document.getElementById('resultados');
            let html = '';

            testes.forEach((teste, idx) => {
                console.log(`\nüìã ${teste.nome}`);
                const resultado = getAdversario(teste.jogo, teste.timePrincipal);
                const sucesso = resultado === teste.esperado;
                
                if (sucesso) {
                    sucessos++;
                    console.log(`‚úÖ SUCESSO: Retornou "${resultado}"`);
                } else {
                    falhas++;
                    console.error(`‚ùå FALHA: Esperava "${teste.esperado}" mas recebeu "${resultado}"`);
                }

                html += `
                    <div class="test-case ${sucesso ? 'success' : 'error'}">
                        <div class="test-title">${teste.nome}</div>
                        <div>Jogo: <span class="test-input">${teste.jogo.time_1} vs ${teste.jogo.time_2}</span></div>
                        <div>Time Principal: <span class="test-input">${teste.timePrincipal}</span></div>
                        <div><span class="expected">Esperado:</span> <span class="test-output">${teste.esperado}</span></div>
                        <div><span class="actual">Obtido:</span> <span class="test-output">${resultado}</span></div>
                        <div style="margin-top: 8px; font-weight: bold; color: ${sucesso ? '#4caf50' : '#f44336'};">
                            ${sucesso ? '‚úÖ PASSOU' : '‚ùå FALHOU'}
                        </div>
                    </div>
                `;
            });

            console.log(`\n========== RESULTADO FINAL ==========`);
            console.log(`‚úÖ Sucessos: ${sucessos}`);
            console.log(`‚ùå Falhas: ${falhas}`);
            console.log(`üìä Total: ${testes.length}`);
            console.log(`üìà Taxa de sucesso: ${Math.round((sucessos / testes.length) * 100)}%`);

            resultadosDiv.innerHTML = html;
        }
    </script>
</body>
</html>
